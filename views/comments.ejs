<!doctype html>
<html lang="en">

<head>
    <meta content="user-scalable=0, initial-scale=1,minimum-scale=1, maximum-scale=1, width=device-width, minimal-ui=1"
        name="viewport">
    </meta>
    <title>Visible Bottleneck</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Lato&family=Montserrat&family=Roboto+Slab:wght@700&display=swap"
        rel="stylesheet">
    <link href="/stylesheets/style.css" rel="stylesheet">
    <!-- Vue -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <!-- Bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
</head>

<body>
    <div id="app" class="container">
        <h2>Comments</h2>
        <div class="row mt-3">
            <div class="d-flex flex-row-reverse">
                <a href="/comments/add/" class="btn btn-outline-success" role="button">Add
                    comment</a>
            </div>
        </div>
        <div v-for="comment in comments" class="row forum-container mt-3">
            <!-- <div class="forum-post col-2">
                <div class="resource-vote-container">
                </div>
            </div> -->
            <div class="forum-post col-10">
                <div class="resource-header row">
                    <div class="col-10">posted by:
                        <span v-if="comment.author">{{comment.author}}</span>
                        <span v-else>anonymous</span>
                        <hr>
                    </div>
                    <div class="resource-header-buttons col-2">
                    </div>
                </div>
                <div v-html="comment.content">
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue
        createApp({
            data() {
                return {
                    comments: [],
                }
            },
            // Fetch the comments from the API.
            async created() {
                this.comments = await
                    fetch("/api/comments")
                        .then(function (response) {
                            return response.json();
                        })
                        .then(function (data) {
                            return data;
                        });
            },
            methods: {}
        }).mount('#app')
    </script>
</body>

</html>